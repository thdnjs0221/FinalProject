<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://www.springframework.org/security/tags"
	prefix="security"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<div id="sri_section" class="  ">
	<div id="sri_wrap">
		<div id="content">
<!-- 			여기서부터  내용-->
			<div class="wrap_jview mt100">
				<section class="jview jview-0-46882362">
					<a class="placeholder" tabindex="-1"></a>
					<div class="wrap_jv_cont">
						<input type="hidden" name="track_url_0" value="t_category=relay_view&amp;t_content=relay_view_search&amp;t_ref=search&amp;t_ref_content=generic&amp;t_ref_scnid=&amp;dpId=&amp;search_uuid=c234ec83-cc78-4c7b-9e28-9bde6e56dffe"
							class="track_url" data-view_type="search" id="track_url_0">
						<input type="hidden" name="logging_url_46882362" value="" class="logging-url" id="logging_url_46882362">
						<div class="wrap_jv_header">
							<a class="placeholder" tabindex="-1"></a>
							<div class="jv_header" data-rec_idx="46882362" data-rec_seq="0">
								<div class="title_inner">
									<a class="company" title="">${recruit.company.companyNm}</a>
									<button type="button" id="scrapBtn" csn="TVUrT2lHWkZvZGZWU1RmQ2N6K1RMQT09" title="공고 스크랩" del_fl="n" aria-pressed="false" class="btn_jview spr_jview btn_interest" onclick="try{Saramin.btnJob('favor', this, '', 'list');}catch(e){}" onmousedown="try {n_trackEvent('relay_view', 'title', 'favor', '');}catch(e){}" first_nudge="off"><span>공고 스크랩</span></button>
								</div>
								<h1 class="tit_job">${recruit.rcrtTitle}</h1>

								<div class="btn_apply">
									<span class="dday">D-23</span>
									<button class="sri_btn_lg for_btn_event"
										title="클릭하면 입사지원할 수 있는 창이 뜹니다."
										id="applyBtn"  data-bs-toggle="modal" data-bs-target="#mModal" data-backdrop="false"
										onmousedown="try{n_trackEvent('relay_view','summary','quick_apply','');}catch(e){}">
										<span class="sri_btn_immediately">입사지원</span>
									</button>
								</div>
							</div>
						</div>
						<div class="jv_cont jv_summary">
							<h2 class="jv_title blind">핵심 정보</h2>
							<div class="cont">
								<div class="col">
									<dl>
										<dt>경력</dt>
										<dd>
											<strong>${recruit.rcrtCareer} ↑</strong>
										</dd>
									</dl>
									<dl>
										<dt>학력</dt>
										<dd>
											<strong>${recruit.rcrtEdu}</strong>
										</dd>
									</dl>
									<dl>
										<dt>근무형태</dt>
										<dd>
											<strong>${recruit.rcrtType}</strong>
										</dd>
									</dl>
								</div>
								<div class="col">
									<dl>
										<dt>급여</dt>
										<dd>${recruit.rcrtSalary}</dd>
									</dl>
									<dl>
										<dt>근무지역</dt>
										<dd>
											${recruit.rcrtLoc}
<!-- 											<button type="button" -->
<!-- 												class="spr_jview btn_jview btn_move_map"> -->
<!-- 												<span>지도</span> -->
<!-- 											</button> -->
										</dd>
									</dl>
								</div>
								<div class="meta">
									<span class="salary_desc"><strong>최저임금계산에 대한 알림</strong>
										하단에 명시된 급여, 근무 내용 등이 최저임금에 미달하는 경우 위 내용이 우선합니다.</span>
									<ul class="list_meta">
										<li>조회수 <strong>${recruit.rcrtHit}</strong></li>
										<li class="wrap_share">
											<div class="share">
												<button type="button" class="spr_jview btn_jview btn_share">
													<svg aria-hidden="true" focusable="false" class="ic">
														<use xlink:href="#icon_sns_share"></use></svg>
													<span>공유하기</span>
												</button>
												<ul class="spr_jview list_share">
													<li>
														<a href="http://www.facebook.com/share.php?api_key=137906922916817&amp;display=popup&amp;u=https%3A%2F%2Fwww.saramin.co.kr%2Fzf_user%2Fjobs%2Frelay%2Fview%3Frec_idx%3D46882362%26view_type%3Dsearch"
															class="spr_jview facebook"
															onclick="window.open(this.href, this.target, 'width=578,height=380'); return false;"
															onmousedown="try{n_trackEvent('relay_view', 'top', 'facebook', '');}catch(e){}"
															title="페이스북 공유하기"><span class="blind">페이스북</span>
														</a>
													</li>
													<li>
														<a href="http://twitter.com/share?url=https%3A%2F%2Fwww.saramin.co.kr%2Fzf_user%2Fjobs%2Frelay%2Fview%3Frec_idx%3D46882362%26view_type%3Dsearch&amp;text=%EB%8C%80%EC%A0%84%20%EB%A1%AF%EB%8D%B0%20%EC%9B%B0%ED%91%B8%EB%93%9C%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20JAVA%20JSP%20%EC%9B%B9%EA%B0%9C%EB%B0%9C%EC%9E%90%20%EA%B2%BD%EB%A0%A5%204%EB%85%84%EC%9D%B4%EC%83%81%20-%20%28%EC%A3%BC%29%ED%95%9C%EA%B5%AD%EC%98%A4%ED%94%88%EC%86%94%EB%A3%A8%EC%85%98%20%23saramin"
															class="spr_jview twitter"
															onclick="window.open(this.href, this.target, 'width=554,height=454'); return false;"
															onmousedown="try{n_trackEvent('relay_view', 'top', 'twitter', '');}catch(e){}"
															title="트위터 공유하기"><span class="blind">트위터</span>
														</a>
													</li>
													<li>
														<button type="button" class="spr_jview copy_url"
															title="공고 주소 복사하기"
															onclick="JobsView.copyUrl('https://www.saramin.co.kr/zf_user/jobs/relay/view?rec_idx=46882362&amp;view_type=search');"
															onmousedown="try{n_trackEvent('relay_view', 'top', 'copyurl', '' );}catch(e){}">
															<span class="blind">URL복사</span>
														</button>
													</li>
													<li>
														<button type="button" class="spr_jview send_sms"
															title="이 공고 내 폰으로 전송하기"
															onclick="Saramin.showQuickLogin();"
															onmousedown="try{n_trackEvent('relay_view', 'top', 'sendsms', '');}catch(e){}">
															<span class="blind">SMS발송</span>
														</button>
													</li>
												</ul>
											</div>
										</li>
						            </ul>
								</div>
							</div>
						</div>
						<div class="jv_cont jv_detail">
							<table width="100%" border="0" cellpadding="0" cellspacing="0" align="center"
								style="font-family: malgun gothic, 맑은 고딕; font-size: 15px; line-height: 25px; letter-spacing: -1px">
								<tbody>									
									<tr>
										<td style="padding: 0 45px">
											<table width="100%" border="0" cellpadding="0" cellspacing="0" align="center"
												style="font-family: malgun gothic, 맑은 고딕; font-size: 15px; line-height: 25px; letter-spacing: -1px">
												<tbody>
													<tr>
														<td style="font-family: malgun gothic, 맑은 고딕; font-size: 28px; line-height: 28px; letter-spacing: -2px; color: #0061AE;">모집분야&nbsp;</td>
													</tr>
													<tr>
														<td height="15"></td>
													</tr>
													<tr>
														<td>
															ㆍ직무/직업 :&nbsp; ${recruit.rcrtKeywordnm}<br>
															ㆍ모집분야명 :&nbsp; ${recruit.rcrtKeywordnm}<br>
															ㆍ모집인원 :&nbsp; ${recruit.rcrtPerson}명<br>
															ㆍ경력 :&nbsp; ${recruit.rcrtCareer}<br>
															ㆍ필수우대조건 :&nbsp; ${recruit.rcrtCondition}<br>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
									<tr>
										<td height="65"></td>
									</tr>
									<tr>
										<td style="padding: 0 45px"><table width="100%"
												border="0" cellpadding="0" cellspacing="0" align="center"
												style="font-family: malgun gothic, 맑은 고딕; font-size: 15px; line-height: 25px; letter-spacing: -1px">
												<tbody>
													<tr>
														<td style="font-family: malgun gothic, 맑은 고딕; font-size: 28px; line-height: 28px; letter-spacing: -2px; color: #0061AE;">지원자격&nbsp;</td>
													</tr>
													<tr>
														<td height="15"></td>
													</tr>
													<tr>
														<td>ㆍ지원자 학력 :&nbsp; ${recruit.rcrtEdu}<br>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
									<tr>
										<td height="65"></td>
									</tr>
									<tr>
										<td style="padding: 0 45px"><table width="100%"
												border="0" cellpadding="0" cellspacing="0" align="center"
												style="font-family: malgun gothic, 맑은 고딕; font-size: 15px; line-height: 25px; letter-spacing: -1px">
												<tbody>
													<tr>
														<td style="font-family: malgun gothic, 맑은 고딕; font-size: 28px; line-height: 28px; letter-spacing: -2px; color: #0061AE;">근무조건&nbsp;</td>
													</tr>
													<tr>
														<td height="15"></td>
													</tr>
													<tr>
														<td>
														ㆍ근무지역 :&nbsp; ${recruit.rcrtLoc} <br>
														ㆍ근무형태 :&nbsp; ${recruit.rcrtType} <br>
														ㆍ급여 :&nbsp; ${recruit.rcrtSalary} <br>
														ㆍ근무요일 :&nbsp; ${recruit.rcrtWeek} <br>
														ㆍ출퇴근 시간 :&nbsp; ${recruit.rcrtStime} ~  ${recruit.rcrtEtime} <br>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
									<tr>
										<td height="65"></td>
									</tr>
									<tr>
										<td style="padding: 0 45px">
											<table width="100%"
												border="0" cellpadding="0" cellspacing="0" align="center"
												style="font-family: malgun gothic, 맑은 고딕; font-size: 15px; line-height: 25px; letter-spacing: -1px;">
												<tbody>
													<tr>
														<td style="font-family: malgun gothic, 맑은 고딕; font-size: 28px; line-height: 28px; letter-spacing: -2px; color: #0061AE;">
															전형절차</td>
													</tr>
													<tr>
														<td height="15"></td>
													</tr>
													<tr>
														<td align="">
<!-- 														<img src="https://www.saraminimage.co.kr/recruit/bbs_recruit2/feelhaus_step_200402.png"> -->
															<c:if test="${not empty procedureList}">
																<c:forEach items="${procedureList}" var="pro">
      																※&nbsp;${pro.rprocOrder} 차 &nbsp;${pro.code.comCodeNm} <br>
																</c:forEach>
															</c:if>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
									
									<tr>
										<td height="15"></td>
									</tr>
									<tr>
										<td height="65"></td>
									</tr>
									<tr>
										<td style="padding: 0 45px">
											<table width="100%"
												border="0" cellpadding="0" cellspacing="0" align="center"
												style="font-family: malgun gothic, 맑은 고딕; font-size: 15px; line-height: 25px; letter-spacing: -1px">
												<tbody>
													<tr>
														<td style="font-family: malgun gothic, 맑은 고딕; font-size: 28px; line-height: 25px; letter-spacing: -2px; color: #0061AE;">
															접수기간 및 방법</td>
													</tr>
													<tr>
														<td height="15"></td>
													</tr>
													<tr>
														<td>
														ㆍ지원 접수 기간 :&nbsp;${recruit.rcrtSdate} ~ ${recruit.rcrtEdate} <br>
														ㆍ지원 접수 방법 :&nbsp;${recruit.rcrtRectype}<br>
														
														
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
									<tr>
										<td height="65"></td>
									</tr>
									<tr>
										<td style="padding: 0 45px">
											<table width="100%"
												border="0" cellpadding="0" cellspacing="0" align="center"
												style="font-family: malgun gothic, 맑은 고딕; font-size: 15px; line-height: 25px; letter-spacing: -1px">
												<tbody>
													<tr>
														<td style="font-family: malgun gothic, 맑은 고딕; font-size: 28px; line-height: 25px; letter-spacing: -2px; color: #0061AE;">
															인사담당자/기업정보</td>
													</tr>
													<tr>
														<td height="15"></td>
													</tr>
													<tr>
														<td>
														
															ㆍ담당자 이름: :&nbsp;${recruit.rcrtNm}<br>
															ㆍ연&nbsp;락&nbsp;처&nbsp;:&nbsp;<span
															style="letter-spacing: 0">${recruit.rcrtTel}</span><br>
															ㆍ이메일 :&nbsp;${recruit.rcrtMail}<br>
															ㆍ복리후생 :&nbsp;${recruit.rcrtWlfr}<br>
															
													   </td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
									<tr>
										<td height="65"></td>
									</tr>
									<tr>
									</tr>
								</tbody>
							</table>
						</div>
						<!-- 상세요강끝 -->
						<div id="map_0" class="jv_cont jv_location"
							data-company-name="(주)한국오픈솔루션"
							data-address="(34352) 대전 대덕구 신탄진로 임시"
							data-latitude="36.3835134346404"
							data-longitude="127.424393857109" data-hide_fl="n"
							data-disable_fl="n">
							<a class="placeholder" tabindex="-1"></a>
							<h2 class="jv_title">근무지위치</h2>
							<div class="cont box">
								<address class="address">
									<span class="spr_jview txt_adr">
										<span class="wrap_ic">
											<svg class="ic" width="20" height="20" viewBox="0 0 20 20"
													fill="none">
													<path
														d="M14.305 10.9376L10.5998 16.6302C10.1775 17.2789 9.21948 17.2542 8.83119 16.5846L5.52495 10.883C4.85419 9.72631 4.5 8.39263 4.5 7.05307C4.5 4.01462 7.00816 1.5 10.0448 1.5C13.0381 1.5 15.5 3.92741 15.5 6.91099C15.5 8.34059 15.0849 9.73943 14.305 10.9376Z"
														stroke="#8491A7"></path>
													<circle cx="10" cy="7" r="2.5" stroke="#8491A7"></circle>
											</svg>
										</span>
									 	${recruit.rcrtLoc}
									 </span>
								</address>
								<div id="mapContainerPop_0" class="layer_pop_manage layer_map"
									data-loaded="n">
									<h4>지도 보기</h4>
									<div class="container_map">
										<div class="wrap_mapapi" id="mapArea_0">
											<div class="map_view_wrap">
												<div id="mapContainer_0" class="map_view">
													<div id="mapWrapper_0" class="view">
														<div id="mapView_0" style="width: 100%; height: 100%;"></div>
														<div id="roadView_0" style="height: 100%; text-align: left;"></div>
													</div>
												</div>
											</div>
												
										</div>
									</div>
								</div>
									
							</div>
						</div>
					</div>
					<div class="jv_cont jv_howto">
							<a class="placeholder" tabindex="-1"></a>
							<h2 class="jv_title">접수기간 및 방법</h2>
							<div class="cont box">
								<div class="status">
									<div class="info_timer" data-remain-time="2018314">
										<span class="txt">남은 기간</span><span class="day"></span>
										<span class="txt_day"><span class="time"></span>일</span>
									</div>
									<dl class="info_period">
										<dt>시작일</dt>
										<dd>${recruit.rcrtSdate}</dd>
										<dt class="end">마감일</dt>
										<dd>${recruit.rcrtEdate}</dd>
									</dl>
									<button class="sri_btn_lg for_btn_event"
										title="클릭하면 입사지원할 수 있는 창이 뜹니다."
										onclick="try{quickApplyForm('46882362','','t_category=relay_view&amp;t_content=relay_view_search&amp;t_ref=search&amp;t_ref_content=generic&amp;t_ref_scnid=&amp;dpId=&amp;search_uuid=c234ec83-cc78-4c7b-9e28-9bde6e56dffe&amp;inner_source=saramin&amp;inner_medium=pattern&amp;inner_campaign=relay_view_apply_0&amp;inner_term=search', 'searchType=search&amp;searchword=%EB%8C%80%EC%A0%84+%EA%B0%9C%EB%B0%9C%EC%9E%90'); return false;} catch (e) {}; return false;"
										onmousedown="try{n_trackEvent('relay_view','contacts','quick_apply_bt','');}catch(e){}">
										<span class="sri_btn_immediately">입사지원</span>
									</button>
								</div>
								<dl class="guide">
									<dt>지원방법</dt>
									<dd class="method">
										<button class="sri_btn_1 for_btn_event"
											title="클릭하면 입사지원할 수 있는 창이 뜹니다."
											onclick="try{quickApplyForm('46882362','','t_category=relay_view&amp;t_content=relay_view_search&amp;t_ref=search&amp;t_ref_content=generic&amp;t_ref_scnid=&amp;dpId=&amp;search_uuid=c234ec83-cc78-4c7b-9e28-9bde6e56dffe&amp;inner_source=saramin&amp;inner_medium=pattern&amp;inner_campaign=relay_view_apply_0&amp;inner_term=search', 'searchType=search&amp;searchword=%EB%8C%80%EC%A0%84+%EA%B0%9C%EB%B0%9C%EC%9E%90'); return false;} catch (e) {}; return false;"
											onmousedown="try{n_trackEvent('relay_view','contacts','quick_apply','');}catch(e){}">
											<span class="sri_btn_immediately">${recruit.rcrtRectype}</span>
										</button>
									</dd>
									
									<dt>담당자</dt>
									<dd class="manager">${recruit.rcrtNm}</dd>
									<dt>연락처</dt>
									<dd class="info">${recruit.rcrtTel}</dd>
									<dt>이메일</dt>
									<dd class="template">${recruit.rcrtMail}</dd>
								</dl>
								<p class="noti">
									<svg aria-hidden="true" focusable="false" class="ic">
										<use xlink:href="#icon_i"></use></svg>
									마감일은 기업의 사정, 조기마감 등으로 변경될 수 있습니다.
								</p>
							</div>
					</div>
					
				</section>
			</div>
		</div>
	</div>
</div>
				
				


<script type="text/javascript">

// DOMContentLoaded 이벤또
$(function(){
	

	// 현재 시간
	var currentDate = new Date();

	// 마감일 (예시: "2023-12-31" 형식으로 날짜를 설정하세요)
	var deadlineDate = new Date("${recruit.rcrtEdate}")

	// 현재 시간과 마감일 간의 차이 계산
	var timeDifference = deadlineDate - currentDate;

	// 차이를 일(day)과 시간(hour)로 변환
	var days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
	var hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));

	// HTML 업데이트
	document.querySelector('.time').textContent = days;
	//document.querySelector('.time').textContent = hours;
	
	
	
	
		const contextPath = "<%=request.getContextPath()%>"
		let url = contextPath+"/recruit/${recruit.rcrtNo}/scrapcheck";  
		
	$.ajax({
			type:"get",
			url: `\${url}`,
			//contentType:"application/json",
			//data:data,
			dataType:"text",
			success:function(resp){
				console.log("서버에서 받은값:",resp); // 항상 누느로 확인!
				console.log($(this));
				if(resp == "OK"){
					$("#scrapBtn").addClass("on")
		              .attr("aria-pressed", "true")
					  .attr("del_fl","y");
					
					
				}

			},
			error:function(xhr){
				console.log(xhr.status);
			}
		})	
		
	
	
	
	
	//
	$("#scrapBtn").on("click",function(){
		//alert("확인")
		//href="${pageContext.request.contextPath}/recruit/\${recruitVO.rcrtNo}"
		//let reNo = ${recruit.rcrtNo};
		
		//$(this).attr("del_fl","y");
		let url = contextPath+"/recruit/${recruit.rcrtNo}/scrap";  
	
		
		$.ajax({
			type:"post",
			url: `\${url}`,
//			contentType:"application/json",
//			data:data,
			dataType:"text",
			success:function(resp){
				console.log("서버에서 받은값:",resp); // 항상 누느로 확인!
				console.log($(this));
				if(resp == "OK"){
					//jQuery는 꼬옥 변수로 받아서 써야 성능이 좋지만
					//일단 알아보기 편하겡
					$("#scrapBtn").addClass("on")
					              .attr("aria-pressed", "true")
								  .attr("del_fl","y");
					
				}

			},
			error:function(xhr){
				console.log(xhr.status);
			}
		})
	});//$function
})

</script>

<!--파일 상세 Modal 시작 -->

		<div id="mModal" class="modal fade mt100" data-bs-animation="false">
			<div class="modal-dialog">
				<div class="modal-content">

					<!-- Modal Header -->
					<div class="modal-header">
						<h4 class="modal-title">사업자등록증명원상세보기</h4>
						<button type="button" class="btn-close" data-bs-dismiss="modal"></button>

					</div>

					<!-- Modal body -->
					<div class="modal-body modalBody">
<%-- 						<img class="bsnlImg" src="<%=request.getContextPath() %>/resources/images/사업자등록증.jpg" alt="bsnlImg"> --%>
					</div>

						<!-- Modal footer -->
					<div class="modal-footer">
						<a href="#" id="memDltBtn" class="btn btn-danger btn-icon-split">
                            <span class="text">반려</span>
                        </a>
						<a href="#" class="btn btn-info btn-icon-split">
                            <span class="text">승인</span>
                        </a>
					</div>

				</div>
			</div>
		</div>
<!--파일 상세 Modal 끝 -->